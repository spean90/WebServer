<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.webserver.dao.ProductDao">

	<select id="getProductListByParams" resultType="Product">
		select product_id productId, product_name productName, product_desc productDesc, price, limit_time limitTime, product_type productType, create_time createTime
		from product
		<where>
		<if test="product.productId != null">
			and product_id = #{product.productId}
		</if>
		<if test="product.productName != null">
			and product_name = #{product.productName}
		</if>
		<if test="product.productType != null">
			and product_type = #{product.productType}
		</if>
		</where>
		order by product_id 
		<if test="pageBean!= null">
			limit #{pageBean.start}, #{pageBean.rows}
		</if>
	</select>
	
	
	<insert id="addProduct" parameterType="Product" useGeneratedKeys="true" keyProperty="product.productId">
		insert into product (product_name, product_desc,  price, limit_time, product_type, create_time) 
		VALUES (#{product.productName}, #{product.productDesc}, #{product.price}, #{product.limitTime}, #{product.productType}, #{product.createTime})
	</insert>
	
	<update id="updateProduct" parameterType="Product">
		update product 
		<set>
	 		<if test="product.productName!=null">
	 			product_name = #{product.productName},
		 	</if>
		 	<if test="product.productDesc!=null">
		 		product_desc = #{product.productDesc},
		 	</if>
		 	<if test="product.price!=null">
		 		price = #{product.price},
		 	</if>
		 	<if test="product.limitTime!=null">
		 		limit_time = #{product.limitTime},
		 	</if>
		 	<if test="product.productType!=null">
		 		product_type = #{product.productType},
		 	</if>
	 	</set>
	 	where product_id = #{product.productId}
	</update>
	
	 <delete id="deleteProductById" parameterType="java.lang.Long">
	 	delete from product
	 	where product_id = #{productId}
	 </delete>
	
</mapper>
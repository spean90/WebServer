<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.webserver.dao.SubProductDao">

	
	<select id="getSubProductListByProductId" resultType="SubProduct">
		select sub_product_id subProductId,product_id productId, month,discount,create_time createTime,status
		from sub_product
		<if test="productId!=null and productId!=''">
			where product_id = #{productId}
		</if>
	</select>
	
	
	<select id="getSubProductById" resultType="SubProduct">
		select t.sub_product_id subProductId,t.product_id productId, t.month,t.discount,t.create_time createTime,t.status
		,a.price price
		from sub_product t
		left join product a on a.product_id = t.product_id
		where t.sub_product_id = #{subProductId}
	</select>
	
	
	<insert id="addSubProduct" parameterType="SubProduct">
		insert into sub_product (product_id, month,   discount, create_time,status) 
		VALUES (#{subProduct.productId}, #{subProduct.month},  #{subProduct.discount}, #{subProduct.createTime}, #{subProduct.status})
	</insert>
	
	<update id="updateSubProduct" parameterType="SubProduct">
		update sub_product 
		<set>
		 	<if test="subProduct.status != null">
				status = #{subProduct.status},
			</if>
	 	</set>
	 	where sub_product_id = #{subProduct.subProductId}
	</update>
	
	
</mapper>
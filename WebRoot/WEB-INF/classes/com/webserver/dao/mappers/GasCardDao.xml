<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.webserver.dao.GasCardDao">

	<select id="getGasCardListByParams" resultType="GasCard">
		select gas_id gasId,user_id userId, gas_account gasAccount,company, owner owner ,person_id personId 
		from gas_card
		<where>
		<if test="gasCard.userId != null and gasCard.userId != ''">
			and user_id = #{gasCard.userId}
		</if>
		<if test="gasCard.gasId != null and gasCard.gasId != ''">
			and gas_id = #{gasCard.gasId}
		</if>
		<if test="gasCard.gasAccount != null and gasCard.gasAccount != ''">
			and gas_account = #{gasCard.gasAccount}
		</if>
		<if test="gasCard.owner != null and gasCard.owner != ''">
			and owner = #{gasCard.owner}
		</if>
		<if test="gasCard.company != null and gasCard.company != ''">
			and company = #{gasCard.company}
		</if>
		<if test="gasCard.personId != null and gasCard.personId != ''">
			and person_id = #{gasCard.personId}
		</if>
		</where>
		order by gas_id 
		<if test="pageBean!= null">
			limit #{pageBean.start}, #{pageBean.rows}
		</if>
	</select>
	
	<select id="getGasCardById" resultType="GasCard">
		select gas_id gasId,user_id userId, gas_account gasAccount,company, owner owner ,person_id personId 
		from gas_card
		where gas_id = #{gasId}
	</select>
	
	<select id="getGasCardByUser" resultType="GasCard">
		select gas_id gasId,user_id userId, gas_account gasAccount,company, owner owner ,person_id personId 
		from gas_card
		<where>
		<if test="gasCard.userId != null and gasCard.userId != ''">
			and user_id = #{gasCard.userId}
		</if>
		<if test="gasCard.gasAccount != null and gasCard.gasAccount != ''">
			and gas_account = #{gasCard.gasAccount}
		</if>
		</where>
	</select>
	
	
	<insert id="addGasCard" parameterType="GasCard" useGeneratedKeys="true" keyProperty="gasCard.gasId">
		insert into gas_card (user_id, gas_account,company, owner,person_id ) 
		VALUES (#{gasCard.userId}, #{gasCard.gasAccount},  #{gasCard.company}, #{gasCard.owner}, #{gasCard.personId})
	</insert>
	
	 <delete id="deleteGasCardById" parameterType="java.lang.Long">
	 	delete from gas_card 
	 	where gas_id = #{gasId}
	 </delete>
	
</mapper>